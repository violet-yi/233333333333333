# yamlé”šç‚¹(ä¸æ‡‚è‡ªè¡ŒGoogle)å‹¿åŠ¨
proxy-provider-http: &http
  type: http
  interval: 1800
  health-check:
    enable: true
    url: http://www.youtube.com/generate_204
    interval: 15

proxy-provider-file: &file
  type: file
  health-check:
    enable: false
    url: http://www.youtube.com/generate_204
    interval: 7200

# Clashé…ç½®
mixed-port: 7890
allow-lan: false
mode: rule
log-level: info
ipv6: false

external-controller: 127.0.0.1:9090
# æ§åˆ¶é¢æ¿ç›¸å¯¹è·¯å¾„
# external-ui: folder

dns:
  enable: true
  ipv6: false
  listen: 0.0.0.0:1053
  default-nameserver:
   - 223.5.5.5
   - 119.29.29.29
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  nameserver: 
    - 'https://doh.pub/dns-query'
    - 'https://223.5.5.5/dns-query'
  fallback:
    - 'https://doh.dns.sb/dns-query'
    - 'https://1.1.1.1/dns-query'
    - 'tls://8.8.4.4:853'
  fallback-filter:
    geoip: true
    geoip-code: CN

# å¦‚æœæœ‰èŠ‚ç‚¹å¯æŒ‰æ–‡æ¡£å¡«å†™ï¼Œå¹¶åœ¨groupå†…ä½¿ç”¨
proxies:
  # - name: "ss1"
  #   type: ss
  #   server: server
  #   port: 443
  #   cipher: chacha20-ietf-poly1305
  #   password: "password"
  #   # udp: true

# ç­–ç•¥ç»„ç¤ºä¾‹
      # - name: åˆ†ç»„å
        # type: select       # æ‰‹åŠ¨é€‰ç‚¹   
        # url-test     # è‡ªåŠ¨é€‰æ‹©å»¶è¿Ÿæœ€ä½çš„èŠ‚ç‚¹
        # fallback     # èŠ‚ç‚¹æ•…éšœæ—¶è‡ªåŠ¨åˆ‡æ¢ä¸‹ä¸€ä¸ª
        # laod-balance # å‡è¡¡ä½¿ç”¨åˆ†ç»„å†…çš„èŠ‚ç‚¹
        # url: http://www.youtube.com/generate_204 # æµ‹è¯•åœ°å€ éselectç±»å‹åˆ†ç»„å¿…è¦
        # interval: 300 # è‡ªåŠ¨æµ‹è¯•é—´éš”æ—¶é—´ï¼Œå•ä½ç§’ éselectç±»å‹åˆ†ç»„å¿…è¦
        # tolerance: 50 # å…è®¸çš„åå·®ï¼ŒèŠ‚ç‚¹ä¹‹é—´å»¶è¿Ÿå·®å°äºè¯¥å€¼ä¸åˆ‡æ¢ éå¿…è¦
        # proxies:  
          # - èŠ‚ç‚¹åç§°æˆ–å…¶ä»–åˆ†ç»„å¥—å¨ƒ
proxy-groups:
  - name: ğŸš€ èŠ‚ç‚¹é€‰æ‹©
    type: select
    # proxieså¼•ç”¨åˆ«çš„ç»„æˆ–è€…é…ç½®åœ¨æ–‡ä»¶å†…proxiesçš„èŠ‚ç‚¹
    proxies:
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
      - ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
      - ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
      - ğŸš€ æ‰‹åŠ¨åˆ‡æ¢
      # å¦‚æœ‰é…ç½®proxieséƒ¨åˆ†å¯æŒ‰å¦‚ä¸‹æ ¼å¼ä½¿ç”¨é…ç½®æ–‡ä»¶å†…è‡ªå®šä¹‰çš„èŠ‚ç‚¹(éè®¢é˜…èŠ‚ç‚¹)
      # - ss1

  - name: ğŸš€ æ‰‹åŠ¨åˆ‡æ¢
    type: select
    use:
      - Sub1
    filter: "(é¦™æ¸¯|æ—¥æœ¬|æ–°åŠ å¡|å°æ¹¾)0[134]"

  - name: ğŸ¨ Telegram
    type: select
    use:
      - Sub1
    proxies:
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
    filter: "(é¦™æ¸¯|æ—¥æœ¬|æ–°åŠ å¡|å°æ¹¾)0[567]"
    
  - name: ğŸ’ Live
    type: select
    proxies:
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
      - ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
      
  - name: ğŸ€ Medium
    type: select
    proxies:
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
      - ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
      - ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹
      
  - name: ğŸ® YouTube
    type: select
    proxies:
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
      
  - name: ğŸ­ Playä¸‹è½½
    type: select
    proxies:
      - ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
      - ğŸš€ æ‰‹åŠ¨åˆ‡æ¢

  - name: â™»ï¸ è‡ªåŠ¨é€‰æ‹©
    type: url-test
    url: http://www.youtube.com/generate_204
    # interval: 5
    tolerance: 100
    use:
      - Sub1
    filter: "é¦™æ¸¯|æ—¥æœ¬"

  - name: ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
    type: url-test
    url: http://www.youtube.com/generate_204
    # interval: 5
    tolerance: 100
    use:
      - Sub1
      # å½“proxy-provideré…ç½®å¤šä¸ªè®¢é˜…æ—¶ï¼Œä½¿ç”¨useä¸‹æ–¹æ ¼å¼å¼•ç”¨ï¼Œè¿™é‡Œä¸ºåªæœ‰ä¸€ä¸ªè®¢é˜…çš„æƒ…å†µ
      # - Sub2
      # - Sub3
    # filterä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å»ç­›é€‰èŠ‚ç‚¹
    filter: "é¦™æ¸¯"

  - name: ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹
    type: url-test
    url: http://www.youtube.com/generate_204
    # interval: 5
    tolerance: 100
    use:
      - Sub1
      # - Sub2
      # - Sub3
    filter: "æ–°åŠ å¡"

  - name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
    type: url-test
    url: http://www.youtube.com/generate_204
    # interval: 5
    tolerance: 100
    use:
      - Sub1
      # - Sub2
      # - Sub3
    filter: "æ—¥æœ¬"

  - name: ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
    type: url-test
    url: http://www.youtube.com/generate_204
    # interval: 5
    tolerance: 100
    use:
      - Sub1
      # - Sub2
      # - Sub3
    filter: "å°"
  
   #æ­£åˆ™ï¼š(A).*(B)       æ—¢æœ‰ A ä¹Ÿæœ‰ B 
   # .*             åŒ…å«å…¨éƒ¨   
   # ^(?!.*A)       ä¸å«æœ‰ A 
   # ^(?!.*A).*(B)  ä¸å«A æœ‰ B
   # ^(?!.*[å°æ¹¾åŸç”Ÿ12345]).*(æ¨è) æ’é™¤å‰è€…ä»»æ„ä¸€ä¸ªå­—ç¬¦ åŒ…å«åè€…
   ## (é¦™æ¸¯|æ—¥æœ¬|æ–°åŠ å¡)0[2-4]   åŒ…å«æ‹¬å·å†…åŠ åºå·#ä¹Ÿå¯å†™åš[234]
   # é¦™æ¸¯0[1-5](?!.*æµ)(?!.*æ¨)(?!.*G) åŒ…å«å‰è€…æ’é™¤åè€…#é¦™æ¸¯0[13579]

# proxy-provider å¯å‚è€ƒmetaå†…æ ¸æ–‡æ¡£ https://clash-meta.wiki/config/proxy-providers
proxy-providers:
  # åœ¨çº¿è®¢é˜…,æœ‰å¤šä¸ªæœºåœºæŒ‰æ ¼å¼ä¹¦å†™åœ¨ä¸‹é¢
  # æŠ¥é”™å°±åœ¨urlååŠ ä¸Š &flag=clash
  Sub1:
    <<: *http
    path: ./proxies/Sub1.yaml
    url: https://dingyue.wenlianyun.vip/api/v1/client/subscribe?token=d997d029f869308482d0613b11cb0952&security=a3b7fbbce2345d777&flag=clash

  # æœ¬åœ°èŠ‚ç‚¹ï¼Œè·¯å¾„å¯å¡«å†™ç»å¯¹è·¯å¾„æˆ–è€…ç›¸å¯¹è·¯å¾„(ä¸ºclashå·¥ä½œç›®å½•ä¸‹)
  # Sub3:
  #   <<: *file
  #   path: ./proxies/Sub3.yaml

# å¯å‚è€ƒmetaæ ¸æ–‡æ¡£ https://clash-meta.wiki/config/rules/rule-provider
rule-providers:
  localdirect:
    type: http
    behavior: classical
    url: "https://ghproxy.com/https://raw.githubusercontent.com/withered233/Shunt-Rules/main/Local%20Direct.yaml"
    path: ./ruleset/localdirect.yaml
    interval: 86400

  localproxy:
    type: http
    behavior: classical
    url: "https://ghproxy.com/https://raw.githubusercontent.com/withered233/Shunt-Rules/main/Local%20Proxy.yaml"
    path: ./ruleset/localproxy.yaml
    interval: 86400

  youtube:
    type: http
    behavior: classical
    url: "https://ghproxy.com/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/YouTube/YouTube_No_Resolve.yaml"
    path: ./ruleset/youtube.yaml
    interval: 86400

  ins:
    type: http
    behavior: classical
    url: "https://ghproxy.com/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Instagram/Instagram_No_Resolve.yaml"
    path: ./ruleset/ins.yaml
    interval: 86400

  twitter:
    type: http
    behavior: classical
    url: "https://ghproxy.com/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Twitter/Twitter_No_Resolve.yaml"
    path: ./ruleset/twitter.yaml
    interval: 86400

  tiktok:
    type: http
    behavior: classical
    url: "https://ghproxy.com/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/TikTok/TikTok_No_Resolve.yaml"
    path: ./ruleset/tiktok.yaml
    interval: 86400

  twitch:
    type: http
    behavior: classical
    url: "https://ghproxy.com/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Twitch/Twitch_No_Resolve.yaml"
    path: ./ruleset/twitch.yaml
    interval: 86400

  telegram:
    type: http
    behavior: classical
    url: "https://ghproxy.com/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Telegram/Telegram_No_Resolve.yaml"
    path: ./ruleset/telegram.yaml
    interval: 86400

  steamcn:
    type: http
    behavior: classical
    url: "https://ghproxy.com/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/SteamCN/SteamCN_No_Resolve.yaml"
    path: ./ruleset/steamcn.yaml
    interval: 86400

  proxy:
    type: http
    behavior: domain
    url: "https://ghproxy.com/https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/proxy.txt"
    path: ./ruleset/proxy.yaml
    interval: 86400

  direct:
    type: http
    behavior: domain
    url: "https://ghproxy.com/https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/direct.txt"
    path: ./ruleset/direct.yaml
    interval: 86400

  gfw:
    type: http
    behavior: domain
    url: "https://ghproxy.com/https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/gfw.txt"
    path: ./ruleset/gfw.yaml
    interval: 86400

  chinaip:
    type: http
    behavior: classical
    url: "https://ghproxy.com/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/ChinaIPs/ChinaIPs_Classical_No_Resolve.yaml"
    path: ./ruleset/chinaip.yaml
    interval: 86400

# behavior: classical behavior: ipcidr behavior: domain
# è§„åˆ™éƒ¨åˆ†å»ºè®®åŸŸåè§„åˆ™åœ¨å‰ï¼Œipè§„åˆ™åœ¨å
# ipè§„åˆ™å°½é‡ä½¿ç”¨no-resolveï¼Œå‡å°‘éœ€è¦èµ°ä»£ç†çš„åŸŸååœ¨æœ¬åœ°è§£æçš„æƒ…å†µ
rules:
  - RULE-SET,localdirect,DIRECT
  - RULE-SET,localproxy,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,youtube,ğŸ® YouTube
  - RULE-SET,ins,ğŸ€ Medium
  - RULE-SET,twitter,ğŸ€ Medium
  - RULE-SET,tiktok,ğŸ€ Medium
  - RULE-SET,twitch,ğŸ’ Live
  - DOMAIN-SUFFIX,afreecatv.com,ğŸ’ Live
  - DOMAIN-SUFFIX,xn--ngstr-lra8j.com,ğŸ­ Playä¸‹è½½
  - RULE-SET,telegram,ğŸ¨ Telegram
  - RULE-SET,steamcn,DIRECT
  - RULE-SET,proxy,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,direct,DIRECT
  - RULE-SET,gfw,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,chinaip,DIRECT
  - GEOIP,CN,DIRECT
  - MATCH,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
